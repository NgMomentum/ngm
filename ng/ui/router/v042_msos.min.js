!function(e){"use strict";function t(e,t){var r,n=[];for(r in e.path)if(e.path.hasOwnProperty(r)){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function r(e){return e.then(void 0,function(){msos.config.verbose&&msos.console.info("ng/ui/router - silenceUncaughtInPromise -> called.")})&&e}function n(r,n,i,o){var a,u=t(i,o),s={},l=[],c=0,f=0;for(c=0;c<u.length;c+=1)if(u[c]&&u[c].params)for(a=_.keys(u[c].params),f=0;f<a.length;f+=1)_.indexOf(l,a[f])>=0||(l.push(a[f]),s[a[f]]=r[a[f]]);return e.extend({},s,n)}function i(e,t,r){var n,i=0;for(r||(r=_.keys(e)),i=0;i<r.length;i+=1)if(n=r[i],e[n]!=t[n])return!1;return!0}function o(t,r){var n={};return e.forEach(t,function(e){n[e]=r[e]}),n}function a(t,n){var i=1,o=2,a={},u=[],s=a,l=e.extend(t.when(t.defer("ng_ui_router_when_$Resolve"),a),{$$promises:a,$$values:a});this.study=function(a){function c(t,r){var s;if($[r]!==o){if(h.push(r),$[r]===i)throw h.splice(0,_.indexOf(h,r)),new Error("Cyclic dependency: "+h.join(" -> "));$[r]=i,_.isString(t)?p.push(r,[function(){return n.get(t)}],u):(s=n.annotate(t),e.forEach(s,function(e){e!==r&&a.hasOwnProperty(e)&&c(a[e],e)}),p.push(r,t,s)),h.pop(),$[r]=o}}function f(t){return e.isObject(t)&&t.then&&t.$$promises}if(!e.isObject(a))throw new Error("'invocables' must be an object");var d=_.keys(a),p=[],h=[],$={};return e.forEach(a,c),a=h=$=null,function(i,o,a){function u(){y-=1,y||(w||e.merge(g,o.$$values),v.$$values=g,v.$$promises=v.$$promises||!0,delete v.$$inheritedValues,$.resolve(g))}function c(e){v.$$failure=e,$.reject(e)}function h(o,s,l){function f(e){p.reject(e),c(e)}function d(){if(!e.isDefined(v.$$failure))try{p.resolve(n.invoke(s,a,g,"$Resolver")),p.promise.then(function(e){g[o]=e,u()},f)}catch(t){f(t)}}var p=t.defer("ng_ui_router_$Resolver_study_invoke"),h=0;e.forEach(l,function(e){m.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(h+=1,m[e].then(function(t){g[e]=t,h-=1,h||d()},f))}),h||d(),m[o]=r(p.promise)}if(f(i)&&void 0===a&&(a=o,o=i,i=null),i){if(!e.isObject(i))throw new Error("'locals' must be an object")}else i=s;if(o){if(!f(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=l;var $=t.defer("ng_ui_router_$Resolve_study"),v=r($.promise),m=v.$$promises={},g=e.extend({},i),y=1+p.length/3,w=!1,b=0;if(r(v),e.isDefined(o.$$failure))return c(o.$$failure),v;for(o.$$inheritedValues&&e.merge(g,_.omit(o.$$inheritedValues,d)),e.extend(m,o.$$promises),o.$$values?(w=e.merge(g,_.omit(o.$$values,d)),v.$$inheritedValues=_.omit(o.$$values,d),u()):(o.$$inheritedValues&&(v.$$inheritedValues=_.omit(o.$$inheritedValues,d)),o.then(u,c)),b=0;b<p.length;b+=3)i.hasOwnProperty(p[b])?u():h(p[b],p[b+1],p[b+2]);return v}},this.resolve=function(e,t,r,n){return this.study(e)(t,r,n)}}function u(t,r,n){this.fromConfig=function(t,r,n){return e.isDefined(t.template)?this.fromString(t.template,r):e.isDefined(t.templateUrl)?this.fromUrl(t.templateUrl,r):e.isDefined(t.templateProvider)?this.fromProvider(t.templateProvider,r,n):null},this.fromString=function(e,t){return _.isFunction(e)?e(t):e},this.fromUrl=function(e,t){return _.isFunction(e)&&(e=e(t)),null==e?(msos.console.warn("ng/ui/router - $TemplateFactory.fromUrl -> no url passed in."),null):n.get("$templateRequest")(e)},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t},"$TemplateFactory")}}function s(t,r,n){function i(e,r,n,i){if(w.push(e),g[e])return g[e];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(y[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");return y[e]=new k.Param(e,r,n,i),y[e]}function o(e,t,r,n){var i=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(r){case!1:i=["(",")"+(n?"?":"")];break;case!0:o=o.replace(/\/$/,""),i=["(?:/(",")|/)?"];break;default:i=["("+r+"|",")?"]}return o+i[0]+t+i[1]}function a(n,i){var o,a,u,s,l;return o=n[2]||n[3],l=r.params[o],u=t.substring(v,n.index),a=i?n[4]:n[4]||("*"===n[1]?".*":null),a&&(s=k.type(a)||e.inherit(k.type("string"),{pattern:new RegExp(a,r.caseInsensitive?"i":void 0)})),{id:o,regexp:a,segment:u,type:s,cfg:l}}r=e.extend({params:{}},e.isObject(r)?r:{});var u,s,l,c,f,d,p=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,$="^",v=0,m=this.segments=[],g=n?n.params:{},y=this.params=n?n.params.$$new():new k.ParamSet,w=[];for(this.source=t;(u=p.exec(t))&&(s=a(u,!1),!(s.segment.indexOf("?")>=0));)l=i(s.id,s.type,s.cfg,"path"),$+=o(s.segment,l.type.pattern.source,l.squash,l.isOptional),m.push(s.segment),v=p.lastIndex;if(c=t.substring(v),f=c.indexOf("?"),f>=0){if(d=this.sourceSearch=c.substring(f),c=c.substring(0,f),this.sourcePath=t.substring(0,v+f),d.length>0)for(v=0;u=h.exec(d);)s=a(u,!0),l=i(s.id,s.type,s.cfg,"search"),v=p.lastIndex}else this.sourcePath=t,this.sourceSearch="";$+=o(c)+(r.strict===!1?"/?":"")+"$",m.push(c),this.regexp=new RegExp($,r.caseInsensitive?"i":void 0),this.prefix=m[0],this.$$paramNames=w}function l(t){e.extend(this,t)}function c(){function t(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}function r(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}function n(){return{strict:d,caseInsensitive:f}}function i(e){return _.isFunction(e)||_.isArray(e)&&_.isFunction(e[e.length-1])}function o(){for(var t;v.length;){if(t=v.shift(),t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");e.extend(h[t.name],u.invoke(t.def,void 0,void 0,t.name))}}function a(t){e.extend(this,t||{})}k=this;var u,f=!1,d=!0,p=!1,h={},$=!0,v=[],m={string:{encode:t,decode:r,is:function(e){return null===e||void 0===e||"string"==typeof e},pattern:/[^/]*/},"int":{encode:t,decode:function(e){return parseInt(e,10)},is:function(e){return void 0!==e&&null!==e&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):void 0},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):void 0},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:e.toJson,decode:e.fromJson,is:e.isObject,equals:e.equals,pattern:/[^/]*/},any:{encode:e.identity,decode:e.identity,equals:e.equals,pattern:/.*/}};c.$$getDefaultValue=function(e){if(!i(e.value))return e.value;if(!u)throw new Error("Injectable functions cannot be called at configuration time");return u.invoke(e.value,void 0,void 0,"$UrlMatcherFactory")},this.caseInsensitive=function(t){return e.isDefined(t)&&(f=t),f},this.strictMode=function(t){return e.isDefined(t)&&(d=t),d},this.defaultSquashPolicy=function(t){if(!e.isDefined(t))return p;if(t!==!0&&t!==!1&&!_.isString(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return p=t,t},this.compile=function(t,r){return new s(t,e.extend(n(),r))},this.isMatcher=function(t){var r=!0;return e.isObject(t)?(e.forEach(s.prototype,function(n,i){_.isFunction(n)&&(r=r&&e.isDefined(t[i])&&_.isFunction(t[i]))}),r):!1},this.type=function(t,r,n){if(!e.isDefined(r))return h[t];if(h.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return h[t]=new l(e.extend({name:t},r)),n&&(v.push({name:t,def:n}),$||o()),this},e.forEach(m,function(t,r){h[r]=new l(e.extend({name:r},t))}),h=e.inherit(h,{}),this.$get=["$injector",function(t){return u=t,$=!1,o(),e.forEach(m,function(e,t){h[t]||(h[t]=new l(e))}),this}],this.Param=function(t,r,n,o){function a(t){var r=e.isObject(t)?_.keys(t):[],n=-1===_.indexOf(r,"value")&&-1===_.indexOf(r,"type")&&-1===_.indexOf(r,"squash")&&-1===_.indexOf(r,"array");return n&&(t={value:t}),t.$$fn=i(t.value)?t.value:function(){return t.value},t}function s(e,r,n){if(e.type&&r)throw new Error("Param '"+t+"' has two type configurations.");return r?r:e.type?_.isString(e.type)?h[e.type]:e.type instanceof l?e.type:new l(e.type):"config"===n?h.any:h.string}function c(){var r={array:"search"===o?"auto":!1},i=t.match(/\[\]$/)?{array:!0}:{};return e.extend(r,i,n).array}function f(e,t){var r=e.squash;if(!t||r===!1)return!1;if(void 0===r||null===r)return p;if(r===!0||_.isString(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}function d(e,t,r,n){var i,o,a=[{from:"",to:r||t?void 0:""},{from:null,to:r||t?void 0:""}];return i=_.isArray(e.replace)?e.replace:[],_.isString(n)&&i.push({from:n,to:void 0}),o=_.map(i,function(e){return e.from}),_.filter(a,function(e){return-1===_.indexOf(o,e.from)}).concat(i)}function $(){if(!u)throw new Error("Injectable functions cannot be called at configuration time");var e=u.invoke(n.$$fn,void 0,void 0,S.type.name);if(null!==e&&void 0!==e&&!S.type.is(e))throw new Error("Default value ("+e+") for parameter '"+S.id+"' is not an instance of Type ("+S.type.name+")");return e}function v(t){function r(e){return function(t){return t.from===e}}function n(e){var t=_.map(_.filter(S.replace,r(e)),function(e){return e.to});return t.length?t[0]:e}return t=n(t),e.isDefined(t)?S.type.$normalize(t):$()}function m(){return"{Param:"+t+" "+r+" squash: '"+w+"' optional: "+y+"}"}var g,y,w,b,S=this;n=a(n),r=s(n,r,o),g=c(),r=g?r.$asArray(g,"search"===o):r,"string"!==r.name||g||"path"!==o||void 0!==n.value||(n.value=""),y=void 0!==n.value,w=f(n,y),b=d(n,g,y,w),e.extend(this,{id:t,type:r,location:o,array:g,squash:w,replace:b,isOptional:y,value:v,dynamic:void 0,config:n,toString:m})},a.prototype={$$new:function(){return e.inherit(this,e.extend(new a,{$$parent:this}))},$$keys:function(){for(var t=[],r=[],n=this,i=_.keys(a.prototype);n;)r.push(n),n=n.$$parent;return r.reverse(),e.forEach(r,function(r){e.forEach(_.keys(r),function(e){-1===_.indexOf(t,e)&&-1===_.indexOf(i,e)&&t.push(e)})}),t},$$values:function(t){var r={},n=this;return e.forEach(n.$$keys(),function(e){r[e]=n[e].value(t&&t[e])}),r},$$equals:function(t,r){var n=!0,i=this;return e.forEach(i.$$keys(),function(e){var o=t&&t[e],a=r&&r[e];i[e].type.equals(o,a)||(n=!1)}),n},$$validates:function(e){var t,r,n,i,o,a=this.$$keys();for(t=0;t<a.length&&(r=this[a[t]],n=e[a[t]],void 0!==n&&null!==n||!r.isOptional);t+=1){if(i=r.type.$normalize(n),!r.type.is(i))return!1;if(o=r.type.encode(i),_.isString(o)&&!r.type.pattern.exec(o))return!1}return!0},$$parent:void 0},this.ParamSet=a}function f(t,r){function n(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!==t&&void 0!==t?t[1].replace(/\\(.)/g,"$1"):""}function i(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})}function o(t,r,n){if(!n)return!1;var i=t.invoke(r,r,{$match:n},"handleIfMatch");return e.isDefined(i)?i:!0}function a(r,n,i){function o(e,t,r){return"/"===p?e:t?p.slice(0,-1)+e:r?p.slice(1)+e:e}function a(e){function t(e){var t=e(i,r);return t?(_.isString(t)&&(msos.console.debug("ng/ui/router - $UrlRouterProvider - $get - update -> url: "+t),r.replace().url(t)),!0):!1}var n=0;if(!e||!e.defaultPrevented){for(d=void 0,n=0;n<s.length;n+=1)if(t(s[n]))return;l&&t(l)}}function f(){return u=u||n.$on("$locationChangeSuccess",a)}var d,p=e.baseHref,h=r.url();return c||f(),{sync:function(){a()},listen:function(){return f()},update:function(e){return e?void(h=r.url()):void(r.url()!==h&&(r.url(h),r.replace()))},push:function(e,t,n){var i=e.format(t||{});null!==i&&t&&t["#"]&&(i+="#"+t["#"]),r.url(i),d=n&&n.$$avoidResync?r.url():void 0,n&&n.replace&&r.replace()},href:function(n,i,a){if(!n.validates(i))return null;var u,s,l,c=t.html5Mode();return e.isObject(c)&&(c=c.enabled),c=c&&Modernizr.history,u=n.format(i),a=a||{},c||null===u||(u="#"+t.hashPrefix()+u),null!==u&&i&&i["#"]&&(u+="#"+i["#"]),u=o(u,c,a.absolute),a.absolute&&u?(s=!c&&u?"/":"",l=r.port(),l=80===l||443===l?"":":"+l,[r.protocol(),"://",r.host(),l,s,u].join("")):u}}}var u,s=[],l=null,c=!1;this.rule=function(e){if(!_.isFunction(e))throw new Error("'rule' must be a function");return s.push(e),this},this.otherwise=function(e){var t;if(_.isString(e))t=e,e=function(){return t};else if(!_.isFunction(e))throw new Error("'rule' must be a function");return l=e,this},this.when=function(t,a){var u,s,l,c=_.isString(a);if(_.isString(t)&&(t=r.compile(t)),!c&&!_.isFunction(a)&&!_.isArray(a))throw new Error("invalid 'handler' in when()");if(s={matcher:function(t,n){return c&&(u=r.compile(n),n=["$match",function(e){return u.format(e)}]),e.extend(function(e,r){return o(e,n,t.exec(r.path(),r.$$search))},{prefix:_.isString(t.prefix)?t.prefix:""})},regex:function(t,r){if(t.global||t.sticky)throw new Error("when() RegExp must not be global or sticky");return c&&(u=r,r=["$match",function(e){return i(u,e)}]),e.extend(function(e,n){return o(e,r,t.exec(n.path()))},{prefix:n(t)})}},l={matcher:r.isMatcher(t),regex:t instanceof RegExp},l.matcher)return this.rule(s.matcher(t,a));if(l.regex)return this.rule(s.regex(t,a));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){void 0===e&&(e=!0),c=e},a.$inject=["$location","$rootScope","$injector"],this.$get=a}function d(t,a){function u(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function s(e,t){if(e){var r,n,i,o,a=_.isString(e),l=a?e:e.name,c=u(l),f=0;if(c){if(!t)throw new Error("No reference point given for path '"+l+"'");for(t=s(t),r=l.split("."),n=r.length,i=t,f=0;n>f;f+=1)if(""===r[f]&&0===f)i=t;else{if("^"!==r[f])break;if(!i.parent)throw new Error("Path '"+l+"' not valid for state '"+t.name+"'");i=i.parent}r=r.slice(f).join("."),l=i.name+(i.name&&r?".":"")+r}return o=y[l],!o||!a&&(a||o!==e&&o.self!==e)?void 0:o}}function l(e,t){w[e]||(w[e]=[]),w[e].push(t)}function c(r){r=e.inherit(r,{self:r,resolve:r.resolve||{},toString:function(){return this.name}});var n,o,a,u=r.name;if(!_.isString(u)||u.indexOf("@")>=0)throw new Error("State must have a valid name");if(y.hasOwnProperty(u))throw new Error("State '"+u+"' is already defined");if(n=-1!==u.indexOf(".")?u.substring(0,u.lastIndexOf(".")):_.isString(r.parent)?r.parent:e.isObject(r.parent)&&_.isString(r.parent.name)?r.parent.name:"",n&&!y[n])return l(n,r.self);for(o in m)m.hasOwnProperty(o)&&_.isFunction(m[o])&&(r[o]=m[o](r,m.$delegates[o]));for(y[u]=r,!r[b]&&r.url&&t.when(r.url,["$match","$stateParams",function(e,t){v.$current.navigable===r&&i(e,t)||v.transitionTo(r,e,{inherit:!0,location:!1})}]),a=w[u]||[];a.length;)c(a.shift());return r}function f(e){return e.indexOf("*")>-1}function d(e){var t=e.split("."),r=v.$current.name.split("."),n=0;for(n=0;n<t.length;n+=1)"*"===t[n]&&(r[n]="*");return"**"===t[0]&&(r=r.slice(_.indexOf(r,t[1])),r.unshift("**")),"**"===t[t.length-1]&&(r.splice(_.indexOf(r,t[t.length-2])+1,Number.MAX_VALUE),r.push("**")),t.length!==r.length?!1:r.join("")===t.join("")}function p(e,t,r,n,i,o){function a(e,t,r){function n(t){return"search"!==e.params[t].location}var i=e.params.$$keys().filter(n),o=_.pick.apply({},[e.params].concat(i)),a=new k.ParamSet(o);return a.$$equals(t,r)}return!(o.reload||e!==r||!(i===r.locals||e.self.reloadOnSearch===!1&&a(r,n,t)))}function h(t,i,a,u,l,c,h){function m(e,r,n,o){function a(){return s!==v.transition?(msos.console.warn(g+" - $get - handleRedirect - rT_then_resolve -> failed for:",s,v.transition),t.$broadcast("$stateChangeCancel",e.to,e.toParams,r,n),E):(e.options.$retry=!0,v.transitionTo(e.to,e.toParams,e.options))}function u(){return msos.console.warn(g+" - $get - handleRedirect - rT_then_reject -> called."),P}var s,l=t.$broadcast("$stateNotFound",e,r,n);return l.defaultPrevented?(h.update(),P):l.retry?o.$retry?(h.update(),O):(s=v.transition=i.when(i.defer(S+"_study_invoke"),l.retry),s.then(a,u),h.update(),s):null}function w(t,r,n,s,c,f){function d(){var r=[];return e.forEach(t.views,function(n,i){var o=n.resolve&&n.resolve!==t.resolve?n.resolve:{};o.$template=[function(){return a.load(i,{view:n,locals:c.globals,params:h,notify:f.notify})||""}],r.push(l.resolve(o,c.globals,c.resolve,t).then(function(r){if(_.isFunction(n.controllerProvider)||_.isArray(n.controllerProvider)){var a=e.extend({},o,c.globals);r.$$controller=u.invoke(n.controllerProvider,null,a,"resolveViews")}else r.$$controller=n.controller;r.$$state=t,r.$$controllerAs=n.controllerAs,r.$$resolveAs=n.resolveAs,c[i]=r}))}),i.all(i.defer("ng_ui_router_all_$StateProvider_$get_resolveViews"),r).then(function(){return c.globals})}var p,h=n?r:o(t.params.$$keys(),r),$={$stateParams:h};return c.resolve=l.resolve(t.resolve,$,c.resolve,t),p=[c.resolve.then(function(e){c.globals=e})],s&&p.push(s),i.all(i.defer("ng_ui_router_all_$StateProvider_$get_resolveState"),p).then(d).then(function(){return c})}var S="ng_ui_router_reject_$StateProvider_$get_",x=new Error("transition superseded"),E=r(i.reject(i.defer(S+"rej_suspend"),x)),j=r(i.reject(i.defer(S+"rej_prevent"),new Error("transition prevented"))),P=r(i.reject(i.defer(S+"rej_abort"),new Error("transition aborted"))),O=r(i.reject(i.defer(S+"rej_failed"),new Error("transition failed")));return $.locals={resolve:null,globals:{$stateParams:{}}},v={params:{},current:$.self,$current:$,transition:null},v.reload=function(e){return v.transitionTo(v.current,c,{reload:e||!0,inherit:!1,notify:!0})},v.go=function(t,r,n){return v.transitionTo(t,r,e.extend({inherit:!0,relative:v.$current},n))},v.transitionTo=function(a,l,f){function d(){var r,n,i;if(D!==v.transition)return msos.console.warn(g+" - $get - resolveState - $state.transitionTo - rS_resolve -> failed for:",D,v.transition),t.$broadcast("$stateChangeCancel",a.self,l,R.self,M),E;for(r=T.length-1;r>=L;r-=1)i=T[r],i.self.onExit&&u.invoke(i.self.onExit,i.self,i.locals.globals,"$state.transitionTo.onExit"),i.locals=null;for(r=L;r<A.length;r+=1)n=A[r],n.locals=z[r],n.self.onEnter&&u.invoke(n.self.onEnter,n.self,n.locals.globals,"$state.transitionTo.onEnter");return v.transition!==D?(msos.console.warn(g+" - $get - resolveState - $state.transitionTo - rS_resolve -> failed for:",D,v.transition),t.$broadcast("$stateChangeCancel",a.self,l,R.self,M),E):(v.$current=a,v.current=a.self,v.params=l,e.copy(v.params,c),v.transition=null,f.location&&a.navigable&&h.push(a.navigable.url,a.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&t.$broadcast("$stateChangeSuccess",a.self,l,R.self,M),h.update(!0),v.current)}function y(e){return e===x?E:v.transition!==D?(msos.console.warn(g+" - $get - resolveState - $state.transitionTo - rS_reject -> failed:",D,v.transition),t.$broadcast("$stateChangeCancel",a.self,l,R.self,M),E):(v.transition=null,S=t.$broadcast("$stateChangeError",a.self,l,R.self,M,e),S.defaultPrevented||h.update(),i.reject(i.defer("ng_ui_router_reject_$StateProvider_$get_$state.transitionTo"),e))}l=l||{},f=e.extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var S,P,k,A,C,q,D,I,V,F,R=v.$current,M=v.params,T=R.path,U=s(a,f.relative),N=l["#"],L=0,z=[];if(!e.isDefined(U)){if(P={to:a,toParams:l,options:f},k=m(P,R.self,M,f))return k;if(a=P.to,l=P.toParams,f=P.options,U=s(a,f.relative),!e.isDefined(U)){if(!f.relative)throw new Error("No such state '"+a+"'");throw new Error("Could not resolve '"+a+"' from state '"+f.relative+"'")}}if(U[b])throw new Error("Cannot transition to abstract state '"+a+"'");if(f.inherit&&(l=n(c,l||{},v.$current,U)),!U.params.$$validates(l))return O;if(l=U.params.$$values(l),a=U,A=a.path,I=A[L],V=$.locals,f.reload){if(_.isString(f.reload)||e.isObject(f.reload)){if(e.isObject(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");if(F=f.reload===!0?T[0]:s(f.reload),f.reload&&!F)throw new Error("No such reload state '"+(_.isString(f.reload)?f.reload:f.reload.name)+"'");for(;I&&I===T[L]&&I!==F;)V=z[L]=I.locals,L+=1,I=A[L]}}else for(;I&&I===T[L]&&I.ownParams.$$equals(l,M);)V=z[L]=I.locals,L+=1,I=A[L];if(p(a,l,R,M,V,f))return N&&(l["#"]=N),v.params=l,e.copy(v.params,c),e.copy(o(a.params.$$keys(),c),a.locals.globals.$stateParams),f.location&&a.navigable&&a.navigable.url&&(h.push(a.navigable.url,l,{$$avoidResync:!0,replace:"replace"===f.location}),h.update(!0)),v.transition=null,i.when(i.defer("ng_ui_router_when_$StateProvider_$get_$state.transitionTo_skip_reload"),v.current);if(l=o(a.params.$$keys(),l||{}),N&&(l["#"]=N),f.notify&&t.$broadcast("$stateChangeStart",a.self,l,R.self,M,f).defaultPrevented)return t.$broadcast("$stateChangeCancel",a.self,l,R.self,M),null!==v.transition&&void 0!==v.transition||h.update(),j;for(C=i.when(i.defer("ng_ui_router_when_$StateProvider_$get_$state.transitionTo"),V),q=L;q<A.length;q+=1,I=A[q])V=z[q]=e.inherit(V),C=w(I,l,I===a,C,V,f);return D=v.transition=C.then(d).then(null,y),r(D),D},v.is=function(t,r,n){n=e.extend({relative:v.$current},n||{});var i=s(t,n.relative);if(e.isDefined(i))return v.$current!==i?!1:!r||_.keys(r).reduce(function(e,t){var n=i.params[t];return e&&!n||n.type.equals(c[t],r[t])},!0)},v.includes=function(t,r,n){if(n=e.extend({relative:v.$current},n||{}),_.isString(t)&&f(t)){if(!d(t))return!1;t=v.$current.name}var i,o,a,u=s(t,n.relative),l=0;if(e.isDefined(u)){if(!e.isDefined(v.$current.includes[u.name]))return!1;if(!r)return!0;for(i=_.keys(r),l=0;l<i.length;l+=1)if(o=i[l],a=u.params[o],a&&!a.type.equals(c[o],r[o]))return!1;return _.keys(r).reduce(function(e,t){var n=u.params[t];return e&&!n||n.type.equals(c[t],r[t])},!0)}},v.href=function(t,r,i){i=e.extend({lossy:!0,inherit:!0,absolute:!1,relative:v.$current},i||{});var a,u=s(t,i.relative);return e.isDefined(u)?(i.inherit&&(r=n(c,r||{},v.$current,u)),a=u&&i.lossy?u.navigable:u,a&&void 0!==a.url&&null!==a.url?h.href(a.url,o(u.params.$$keys().concat("#"),r||{}),{absolute:i.absolute}):null):null},v.get=function(e,t){if(0===arguments.length)return _.map(_.keys(y),function(e){return y[e].self});var r=s(e,t||v.$current);return r&&r.self?r.self:null},v}var $,v,m,g="ng/ui/router - $StateProvider",y={},w={},b="abstract";m={parent:function(t){if(e.isDefined(t.parent)&&t.parent)return s(t.parent);var r=/^(.+)\.[^.]+$/.exec(t.name);return r?s(r[1]):$},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=e.inherit(t.parent.data,t.data)),t.data},url:function(e){var t=e.url,r={params:e.params||{}};if(_.isString(t))return"^"===t.charAt(0)?a.compile(t.substring(1),r):(e.parent.navigable||$).url.concat(t,r);if(!t||a.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(t){var r=t.url&&t.url.params||new k.ParamSet;return e.forEach(t.params||{},function(e,t){r[t]||(r[t]=new k.Param(t,null,e,"config"))}),r},params:function(t){var r=_.pick(t.ownParams,t.ownParams.$$keys());return t.parent&&t.parent.params?e.extend(t.parent.params.$$new(),r):new k.ParamSet},views:function(t){var r={};return e.forEach(e.isDefined(t.views)?t.views:{"":t},function(e,n){n.indexOf("@")<0&&(n+="@"+t.parent.name),e.resolveAs=e.resolveAs||t.resolveAs||"$resolve",r[n]=e}),r},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(t){var r=t.parent?e.extend({},t.parent.includes):{};return r[t.name]=!0,r},$delegates:{}},$=c({name:"",url:"^",views:null,"abstract":!0}),$.navigable=null,this.decorator=function(t,r){var n=this;return _.isString(t)&&!e.isDefined(r)?m[t]:_.isFunction(r)&&_.isString(t)?(m[t]&&!m.$delegates[t]&&(m.$delegates[t]=m[t]),m[t]=r,n):n},this.state=function(t,r){var n=this;return e.isObject(t)?r=t:r.name=t,c(r),n},h.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter"],this.$get=h}function p(){function t(t){return{load:function(r,n){var i,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=e.extend(o,n),msos.console.debug("ng/ui/router - $ViewProvider - $get - load -> called for: "+r),n.view&&(i=t.fromConfig(n.view,n.params,n.locals)),i}}}t.$inject=["$templateFactory"],this.$get=t}function h(){this.$get=["$timeout",function(e){return function(t){return e(function(){t[0].scrollIntoView()},0,!1)}}]}function $(e,t,r,n){var i=n(t.uiView||t.name||"")(e),o=r.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function v(t,r,n,i,o){function a(){return r.has?function(e){return r.has(e)?r.get(e):null}:function(e){try{return r.get(e)}catch(t){return null}}}function u(e,t){var r,n=function(){return{enter:function(e,t,r){t.after(e),r()},leave:function(e,t){e.remove(),t()}}};return f?{enter:function(e,t,r){f.enter(e,null,t).then(r)},leave:function(e,t){f.leave(e).then(t)}}:c?(r=c&&c(t,e),{enter:function(e,t,n){r.enter(e,null,t),n()},leave:function(e,t){r.leave(e),t()}}):n()}var s,l=a(),c=l("$animator"),f=l("$animate");return s={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(r,a,s){return function(r,a,l){function c(){if(d&&(d.remove(),d=null),h&&(h.$destroy(),h=null),p){var e=p.data("$uiViewAnim");y.leave(p,function(){e.$$animLeave.resolve(),d=null}),d=p,p=null}}function f(u){var f,d,w=$(r,l,a,i),_=w&&t.$current&&t.$current.locals[w];(u||_!==v)&&(f=r.$new(),v=t.$current.locals[w],f.$emit("$viewContentLoading",w),d=s(f,function(t){var i=o.defer("ng_ui_router_$ViewDirective_updateView_animEnter_def"),u=o.defer("ng_ui_router_$ViewDirective_updateView_animLeave_def"),s={$animEnter:i.promise,$animLeave:u.promise,$$animLeave:u};t.data("$uiViewAnim",s),y.enter(t,a,function(){i.resolve(),h&&h.$emit("$viewContentAnimationEnded"),(e.isDefined(g)&&!g||r.$eval(g))&&n(t)}),c()}),p=d,h=f,h.$emit("$viewContentLoaded",w),h.$eval(m))}var d,p,h,v,m=l.onload||"",g=l.autoscroll,y=u(l,r);r.$on("$stateChangeSuccess",function(){f(!1)}),f(!0)}}}}function m(t,r,n,i){return{restrict:"ECA",priority:-400,compile:function(o){var a=o.html();return o.empty?o.empty():o[0].innerHTML=null,function(o,u,s){var l,c,f,d=n.$current,p=$(o,s,u,i),h=d&&d.locals[p];return h?(u.data("$uiView",{name:p,state:h.$$state}),u.html(h.$template||a),l=e.extend({},h),o[h.$$resolveAs]=l,c=t(u.contents()),h.$$controller&&(h.$scope=o,h.$element=u,f=r(h.$$controller,h),h.$$controllerAs&&(o[h.$$controllerAs]=f,o[h.$$controllerAs][h.$$resolveAs]=l),_.isFunction(f.$onInit)&&f.$onInit(),u.data("$ngControllerController",f),u.children().data("$ngControllerController",f)),void c(o)):(u.html(a),void t(u.contents())(o))}}}}function g(e,t){var r,n=e.match(/^\s*({[^}]*})\s*$/);if(n&&(e=t+"("+n[1]+")"),r=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+e+"'");return{state:r[1],paramExpr:r[3]||null}}function y(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function w(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),r="FORM"===e[0].nodeName;return{attr:r?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!r}}function b(e,t,r,n,i){return function(o){var a,u,s=o.which||o.button,l=i();s>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target")||(a=r(function(){t.go(l.state,l.params,l.options)}),o.preventDefault(),u=n.isAnchor&&!l.href?1:0,o.preventDefault=function(){0>=u&&r.cancel(a),u-=1})}}function S(e,t){return{relative:y(e)||t.$current,inherit:!0}}function x(t,r){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,o,a){var u,s,l=g(o.uiSref,t.current.name),c={state:l.state,href:null,params:null},f=w(i),d=a[1]||a[0],p=null;c.options=e.extend(S(i,t),o.uiSrefOpts?n.$eval(o.uiSrefOpts):{}),u=function(r){r&&(c.params=e.copy(r)),c.href=t.href(l.state,c.params,c.options),p&&p(),d&&(p=d.$$addStateInfo(l.state,c.params)),null!==c.href&&o.$set(f.attr,c.href)},l.paramExpr&&(n.$watch(l.paramExpr,function(e){e!==c.params&&u(e)},!0),c.params=e.copy(n.$eval(l.paramExpr))),u(),f.clickable&&(s=b(i,t,r,f,function(){return c}),i[i.on?"on":"bind"]("click",s),n.$on("$destroy",function(){i[i.off?"off":"unbind"]("click",s)}))}}}function E(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,n,i,o){function a(t){d.state=t[0],d.params=t[1],d.options=t[2],d.href=e.href(d.state,d.params,d.options),p&&p(),l&&(p=l.$$addStateInfo(d.state,d.params)),d.href&&i.$set(s.attr,d.href)}var u,s=w(n),l=o[1]||o[0],c=[i.uiState,i.uiStateParams||null,i.uiStateOpts||null],f="["+c.map(function(e){return e||"null"}).join(", ")+"]",d={state:null,params:null,options:null,href:null},p=null;r.$watch(f,a,!0),a(r.$eval(f)),s.clickable&&(u=b(n,e,t,s,function(){return d}),n[n.on?"on":"bind"]("click",u),r.$on("$destroy",function(){n[n.off?"off":"unbind"]("click",u)}))}}}function j(t,r){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(n,i,o,a){function u(e,t){a(function(){e.addClass(t)})}function s(e,t){e.removeClass(t)}function l(e,r){return t.includes(e.name,r)}function c(e,r){return t.is(e.name,r)}function f(){var e=0;for(e=0;e<v.length;e+=1)l(v[e].state,v[e].params)?u(i,m[v[e].hash]):s(i,m[v[e].hash]),c(v[e].state,v[e].params)?u(i,h):s(i,h)}function d(t,r){if(!_.isString(t))throw new Error("state should be a string");return e.isObject(r)?t+e.toJson(r):(r=n.$eval(r),e.isObject(r)?t+e.toJson(r):t)}function p(e,r,n){var o=t.get(e,y(i)),a=d(e,r),u={state:o||{name:e},params:r,hash:a};return v.push(u),m[a]=n,function(){var e=v.indexOf(u);-1!==e&&v.splice(e,1)}}var h,$,v=[],m={};h=r(o.uiSrefActiveEq||"",!1)(n);try{$=n.$eval(o.uiSrefActive)}catch(w){}$=$||r(o.uiSrefActive||"",!1)(n),e.isObject($)&&e.forEach($,function(e,r){var i;_.isString(e)&&(i=g(e,t.current.name),p(i.state,n.$eval(i.paramExpr),r))}),this.$$addStateInfo=function(t,r){if(!(e.isObject($)&&v.length>0)){var n=p(t,r,$);return f(),n}},n.$on("$stateChangeSuccess",f),f()}]}}function P(e){var t=function(t,r){return e.is(t,r)};return t.$stateful=!0,t}function O(e){var t=function(t,r,n){return e.includes(t,r,n)};return t.$stateful=!0,t}var k;e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),a.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",a),u.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",u),s.prototype.concat=function(t,r){var n={caseInsensitive:k.caseInsensitive(),strict:k.strictMode(),squash:k.defaultSquashPolicy()};return new s(this.sourcePath+t+this.sourceSearch,e.extend(n,r),this)},s.prototype.toString=function(){return this.source},s.prototype.exec=function(t,r){function n(e){function t(e){return e.split("").reverse().join("")}function r(e){return e.replace(/\\-/g,"-")}var n=t(e).split(/-(?!\\)/),i=_.map(n,t);return _.map(i,r).reverse()}var i,o,a,u,s,l,c,f,d=this.regexp.exec(t),p={};if(!d)return null;if(r=r||{},i=this.parameters(),o=i.length,a=this.segments.length-1,a!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(u=0;a>u;u+=1){for(l=i[u],c=this.params[l],f=d[u+1],s=0;s<c.replace.length;s+=1)c.replace[s].from===f&&(f=c.replace[s].to);f&&c.array===!0&&(f=n(f)),e.isDefined(f)&&(f=c.type.decode(f)),p[l]=c.value(f)}for(u;o>u;u+=1){for(l=i[u],p[l]=this.params[l].value(r[l]),c=this.params[l],f=r[l],s=0;s<c.replace.length;s+=1)c.replace[s].from===f&&(f=c.replace[s].to);e.isDefined(f)&&(f=c.type.decode(f)),p[l]=c.value(f)}return p},s.prototype.parameters=function(t){return e.isDefined(t)?this.params[t]||null:this.$$paramNames},s.prototype.validates=function(e){return this.params.$$validates(e)},s.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase();
})}e=e||{};var r,n,i,o,a,u,s,l,c,f,d,p,h,$,v=this.segments,m=this.parameters(),g=this.params,y=!1;if(!this.validates(e))return null;for(n=v.length-1,i=m.length,o=v[0],r=0;i>r;r+=1)if(a=n>r,u=m[r],s=g[u],l=s.value(e[u]),c=s.isOptional&&s.type.equals(s.value(),l),f=c?s.squash:!1,d=s.type.encode(l),a)p=v[r+1],h=r+1===n,f===!1?(null!==d&&void 0!==d&&(_.isArray(d)&&d.length?o+=_.map(d,t).join("-"):_.isString(d)?o+=encodeURIComponent(d):msos.console.warn("ng/ui/router - UrlMatcher.prototype.format -> na:",d)),o+=p):f===!0?($=o.match(/\/$/)?/\/?(.*)/:/(.*)/,o+=p.match($)[1]):_.isString(f)&&(o+=f+p),h&&s.squash===!0&&"/"===o.slice(-1)&&(o=o.slice(0,-1));else{if(null===d||void 0===d||c&&f!==!1)continue;if(_.isArray(d)||(d=[d]),0===d.length)continue;d=_.map(d,encodeURIComponent).join("&"+u+"="),o+=(y?"&":"?")+(u+"="+d),y=!0}return o},l.prototype.is=function(){return!0},l.prototype.encode=function(e){return e},l.prototype.decode=function(e){return e},l.prototype.equals=function(e,t){return e===t},l.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},l.prototype.pattern=/.*/,l.prototype.toString=function(){return"{Type:"+this.name+"}"},l.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},l.prototype.$asArray=function(t,r){function n(t,r){function n(e,t){return function(){return e[t].apply(e,arguments)}}function i(t){return _.isArray(t)?t:e.isDefined(t)?[t]:[]}function o(e){switch(e.length){case 0:return;case 1:return"auto"===r?e[0]:e;default:return e}}function a(e){return!e}function u(e,t){return function(r){var n;return _.isArray(r)&&0===r.length?r:(r=i(r),n=_.map(r,e),t===!0?0===_.filter(n,a).length:o(n))}}function s(e){return function(t,r){var n=i(t),o=i(r),a=0;if(n.length!==o.length)return!1;for(a=0;a<n.length;a+=1)if(!e(n[a],o[a]))return!1;return!0}}this.encode=u(n(t,"encode")),this.decode=u(n(t,"decode")),this.is=u(n(t,"is"),!0),this.$normalize=u(n(t,"$normalize")),this.equals=s(n(t,"equals")),this.pattern=t.pattern,this.name=t.name,this.$arrayMode=r}if(!t)return this;if("auto"===t&&!r)throw new Error("'auto' array mode is for query parameters only");return new n(this,t)},e.module("ui.router.util").provider("$urlMatcherFactory",c),e.module("ui.router.util").run(["$urlMatcherFactory",function(e){msos.console.debug("ng/ui/router - $urlMatcherFactory -> called:",e)}]),f.$inject=["$locationProvider","$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",f),d.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],e.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",d).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),p.$inject=[],e.module("ui.router.state").provider("$view",p),e.module("ui.router.state").provider("$uiViewScroll",h),v.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],m.$inject=["$compile","$controller","$state","$interpolate"],e.module("ui.router.state").directive("uiView",v),e.module("ui.router.state").directive("uiView",m),x.$inject=["$state","$timeout"],E.$inject=["$state","$timeout"],j.$inject=["$state","$interpolate"],e.module("ui.router.state").directive("uiSref",x).directive("uiSrefActive",j).directive("uiSrefActiveEq",j).directive("uiState",E),P.$inject=["$state"],O.$inject=["$state"],e.module("ui.router.state").filter("isState",P).filter("includedByState",O)}(window.angular);